<!-- reports.html -->
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
Â Â <meta charset="UTF-8">
Â Â <title>ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ÙƒØªØ¨</title>
Â Â <script type="module">
Â Â Â Â import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
Â Â Â Â import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";
Â Â Â Â import { firebaseConfig } from "./firebase-config.js";

Â Â Â Â const app = initializeApp(firebaseConfig);
Â Â Â Â const db = getFirestore(app);

Â Â Â Â const reportBox = document.getElementById("reportBox");

Â Â Â Â async function loadReports() {
Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â const casesSnapshot = await getDocs(collection(db, "cases"));
Â Â Â Â Â Â Â Â const membersSnapshot = await getDocs(collection(db, "members"));

Â Â Â Â Â Â Â Â const totalCases = casesSnapshot.size;
Â Â Â Â Â Â Â Â const closedCases = casesSnapshot.docs.filter(doc => doc.data().status === "Ù…ØºÙ„Ù‚Ø©").length;
Â Â Â Â Â Â Â Â const openCases = totalCases - closedCases;
Â Â Â Â Â Â Â Â const totalMembers = membersSnapshot.size;

Â Â Â Â Â Â Â Â reportBox.innerHTML = `
Â Â Â Â Â Â Â Â Â Â <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§: ${totalCases}</h3>
Â Â Â Â Â Â Â Â Â Â <h3>Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„Ù…ÙØªÙˆØ­Ø©: ${openCases}</h3>
Â Â Â Â Â Â Â Â Â Â <h3>Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„Ù…ØºÙ„Ù‚Ø©: ${closedCases}</h3>
Â Â Â Â Â Â Â Â Â Â <h3>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ ÙÙŠ Ø§Ù„Ù…ÙƒØªØ¨: ${totalMembers}</h3>
Â Â Â Â Â Â Â Â `;
Â Â Â Â Â Â } catch (err) {
Â Â Â Â Â Â Â Â reportBox.innerHTML = "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±.";
Â Â Â Â Â Â Â Â console.error(err);
Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â loadReports();
Â Â </script>
Â Â <style>
Â Â Â Â body {
Â Â Â Â Â Â font-family: 'Cairo', sans-serif;
Â Â Â Â Â Â background: #34495e;
Â Â Â Â Â Â color: white;
Â Â Â Â Â Â padding: 40px;
Â Â Â Â Â Â text-align: center;
Â Â Â Â }
Â Â Â Â h2 {
Â Â Â Â Â Â font-size: 28px;
Â Â Â Â Â Â margin-bottom: 20px;
Â Â Â Â }
Â Â Â Â #reportBox h3 {
Â Â Â Â Â Â background: #2ecc71;
Â Â Â Â Â Â padding: 15px;
Â Â Â Â Â Â margin: 10px auto;
Â Â Â Â Â Â width: 80%;
Â Â Â Â Â Â border-radius: 8px;
Â Â Â Â }
Â Â Â Â a {
Â Â Â Â Â Â display: inline-block;
Â Â Â Â Â Â margin-top: 30px;
Â Â Â Â Â Â text-decoration: none;
Â Â Â Â Â Â color: #ecf0f1;
Â Â Â Â Â Â background: #e67e22;
Â Â Â Â Â Â padding: 12px 20px;
Â Â Â Â Â Â border-radius: 6px;
Â Â Â Â }
Â Â </style>
</head>
<body>
Â Â <h2>ğŸ“Š ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ÙƒØªØ¨</h2>
Â Â <div id="reportBox">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
Â Â <a href="office.html">ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
</body>
</html>
